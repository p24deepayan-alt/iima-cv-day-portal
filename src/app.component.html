<div class="h-full flex flex-col font-sans text-slate-900 bg-iima-warm">
  @if (user()) {
  <!-- Official University Header -->
  <nav class="bg-iima-blue text-white z-50 shrink-0 border-b-4 border-iima-gold shadow-md">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-20">

        <!-- Logo / Brand -->
        <div class="flex items-center gap-4">
          <div class="w-14 h-14 bg-white rounded-sm flex items-center justify-center shadow-sm p-1">
            <img src="assets/iima-logo.png" alt="IIMA Logo" class="w-full h-full object-contain">
          </div>
          <div class="flex flex-col">
            <span class="font-serif font-bold text-xl tracking-wide leading-tight">IIM AHMEDABAD</span>
            <span class="text-[10px] uppercase tracking-widest opacity-80 font-medium">Placement Committee â€¢ CV Day
              Portal</span>
          </div>
        </div>

        <!-- User Controls -->
        <div class="flex items-center gap-6">
          <div class="text-right hidden md:block border-r border-white/20 pr-6">
            <div class="text-sm font-semibold text-white font-serif">{{ user()?.name }}</div>
            <div class="text-[10px] uppercase tracking-widest text-iima-gold font-bold">{{ user()?.role }}</div>
          </div>
          <button (click)="logout()"
            class="text-sm text-white/80 hover:text-white transition-colors flex items-center gap-2 group">
            <span class="group-hover:underline">Logout</span>
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="flex-1 overflow-auto relative w-full">
    @if (user()?.role === 'student') {
    <div class="h-full w-full overflow-auto bg-iima-warm">
      <app-student-dashboard [targetUserId]="user()!.uid"></app-student-dashboard>
    </div>
    }
    @if (user()?.role === 'reviewer') {
    <div class="h-full w-full overflow-auto bg-iima-warm">
      <app-reviewer-dashboard [targetUserId]="user()!.uid"></app-reviewer-dashboard>
    </div>
    }
    @if (user()?.role === 'admin') {
    <app-admin-dashboard class="h-full block"></app-admin-dashboard>
    }
    @if (user()?.role === 'room') {
    <div class="h-full w-full overflow-auto bg-slate-100">
      <app-room-dashboard [targetUserId]="user()!.uid"></app-room-dashboard>
    </div>
    }
  </main>

  <!-- Official Footer -->
  <footer
    class="bg-iima-blue text-white/60 text-[10px] py-2 text-center tracking-wide border-t border-white/10 shrink-0">
    &copy; 2024 Indian Institute of Management Ahmedabad. All Rights Reserved.
  </footer>
  } @else {
  <app-auth></app-auth>
  }
</div>

<!-- Global Notification Modal -->
@if (notificationService.notification()) {
<div class="fixed inset-0 z-[200] bg-slate-900/75 backdrop-blur-sm flex items-center justify-center p-4">
  <div class="bg-white w-full max-w-md rounded-sm shadow-2xl border-t-8 animate-[fadeIn_0.2s_ease-out]" [ngClass]="{
            'border-blue-500': notificationService.notification()?.type === 'info',
            'border-green-500': notificationService.notification()?.type === 'success',
            'border-amber-500': notificationService.notification()?.type === 'warning',
            'border-red-500': notificationService.notification()?.type === 'error'
          }">
    <div class="p-6">
      <div class="w-12 h-12 rounded-full flex items-center justify-center mb-4 mx-auto" [ngClass]="{
                  'bg-blue-50 text-blue-600': notificationService.notification()?.type === 'info',
                  'bg-green-50 text-green-600': notificationService.notification()?.type === 'success',
                  'bg-amber-50 text-amber-600': notificationService.notification()?.type === 'warning',
                  'bg-red-50 text-red-600': notificationService.notification()?.type === 'error'
                }">
        @if (notificationService.notification()?.type === 'info') { <i class="fas fa-info-circle text-xl"></i> }
        @if (notificationService.notification()?.type === 'success') { <i class="fas fa-check-circle text-xl"></i> }
        @if (notificationService.notification()?.type === 'warning') { <i
          class="fas fa-exclamation-triangle text-xl"></i> }
        @if (notificationService.notification()?.type === 'error') { <i class="fas fa-exclamation-circle text-xl"></i> }
      </div>

      <h3 class="text-xl font-serif font-bold text-center text-slate-800 mb-2">{{
        notificationService.notification()?.title }}</h3>
      <p class="text-sm text-slate-600 text-center leading-relaxed mb-6">
        {{ notificationService.notification()?.message }}
      </p>

      <button (click)="notificationService.dismiss()"
        class="w-full px-4 py-2 text-white font-bold uppercase text-xs rounded-sm transition-colors shadow-sm"
        [ngClass]="{
                     'bg-blue-600 hover:bg-blue-700': notificationService.notification()?.type === 'info',
                     'bg-green-600 hover:bg-green-700': notificationService.notification()?.type === 'success',
                     'bg-amber-500 hover:bg-amber-600': notificationService.notification()?.type === 'warning',
                     'bg-red-600 hover:bg-red-700': notificationService.notification()?.type === 'error'
                   }">
        OK
      </button>
    </div>
  </div>
</div>
}